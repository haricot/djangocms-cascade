{% extends "bs4demo/base.html" %}
{% load static cms_tags bootstrap_tags sekizai_tags sass_tags %}

{% block head %}
{% addtoblock "css" %}
<link rel="stylesheet" href="{% sass_src 'bs4demo/css/main.scss' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'node_modules/sal.js/dist/sal.css' %}" type="text/css" />
{% endaddtoblock %}

{% endblock head %}

{% block header %}
{% static_placeholder 'Header Content' %}
{% if request.toolbar and request.toolbar.edit_mode_active %}
{% addtoblock "js" %}
<script> 
//Quick way to Move static_placeholder "Header Content" as first-child in structure ui
function static_placeholder_moveto_firstchild(title){
    var cms_structure_content = document.querySelectorAll('.cms-structure-content')[0];
    var selector_title = `.cms-dragbar-title[title="${title}"]`
    var cms_dragbar_title_header = document.querySelectorAll(selector_title)[0];
    var cms_dragarea_header = cms_dragbar_title_header.parentNode.parentNode;
    var isfirstchild = (cms_dragarea_header ==  cms_dragarea_header.parentNode.firstChild);
    if (cms_structure_content.classList.contains('empty') || cms_dragbar_title_header && !isfirstchild ){
    cms_structure_content.prepend(cms_dragarea_header); 
    }
};

document.addEventListener("DOMContentLoaded", function() {
    var observer = new MutationObserver(function(e) {static_placeholder_moveto_firstchild('Header Content');});
    var cms_structure_content = document.querySelectorAll('.cms-structure-content')[0];
    observer.observe(cms_structure_content, { childList: true});
});
</script>
{% endaddtoblock %}
{% endif %}

{% if cms_version >= "3.5.0" and request.toolbar  %}
{% endif %}

{% endblock header %}

{% block main %}{% placeholder "Main Content" or %}
<div class="container">
	<div class="row starter-template">
		<div class="col-12">
			<h1>Add Bootstrap container here</h1>
			<p class="lead">Use this placeholder as a quick way to start editing a new CMS page.</p>
			<p>All you have to do is to append <code>?edit</code> to the URL, switch to “Structure” mode
			and add a <strong>Bootstrap Container Plugin</strong> or <strong>Jumbotron Plugin</strong>.</p>
		</div>
	</div>
</div>
{% endplaceholder %}{% endblock main %}
